# Algo Market - ì˜¨ë¼ì¸ ì €ì§€ ì‹œìŠ¤í…œ

ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í•´ê²° í”Œë«í¼ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ë¬¸ì œë¥¼ ì œì¶œí•˜ê³  ìë™ ì±„ì ì„ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì±„ì  ì§„í–‰ìƒí™©ê³¼ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SSE ì—°ê²°      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   Problem Service   â”‚
â”‚             â”‚                  â”‚    (Spring Boot)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                     â”‚
                                 â”‚  - ë¬¸ì œ ê´€ë¦¬          â”‚
                                 â”‚  - íšŒì› ì¸ì¦          â”‚
                                 â”‚  - ì œì¶œ ì²˜ë¦¬          â”‚
                                 â”‚  - ì‹¤ì‹œê°„ ì§„í–‰ìƒí™©     â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚         â–²
                                           â”‚ SQS     â”‚ Redis
                                           â”‚         â”‚ Pub/Sub
                                           â–¼         â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   Judge Server      â”‚
                              â”‚    (FastAPI)        â”‚
                              â”‚                     â”‚
                              â”‚  - ì½”ë“œ ì»´íŒŒì¼        â”‚
                              â”‚  - í…ŒìŠ¤íŠ¸ ì‹¤í–‰        â”‚
                              â”‚  - ì§„í–‰ìƒí™© ë°œí–‰       â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â”‚ Docker
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  Isolated Runtime   â”‚
                              â”‚  (Docker Container) â”‚
                              â”‚                     â”‚
                              â”‚  - ë³´ì•ˆ ì‹¤í–‰ í™˜ê²½      â”‚
                              â”‚  - ì‹œê°„/ë©”ëª¨ë¦¬ ì œí•œ     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
algo-market/
â”œâ”€â”€ problem-service/          # ë©”ì¸ ì„œë¹„ìŠ¤ (Spring Boot)
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ algomarket/
â”‚   â”‚       â””â”€â”€ problemservice/
â”‚   â”‚           â”œâ”€â”€ adapter/          # ì™¸ë¶€ ì–´ëŒ‘í„° (API, ë©”ì‹œì§•, ì €ì¥ì†Œ)
â”‚   â”‚           â”œâ”€â”€ application/      # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
â”‚   â”‚           â””â”€â”€ domain/           # ë„ë©”ì¸ ëª¨ë¸
â”‚   â””â”€â”€ build.gradle.kts
â”œâ”€â”€ judge-server/             # ì±„ì  ì„œë²„ (Python FastAPI)
â”‚   â”œâ”€â”€ judge/                # ì±„ì  ë¡œì§
â”‚   â”œâ”€â”€ problems/             # ë¬¸ì œ í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â”œâ”€â”€ tests/                # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â””â”€â”€ requirements.txt
â””â”€â”€ assignment.md             # ê³¼ì œ ëª…ì„¸ì„œ
```

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. ë¬¸ì œ ê´€ë¦¬
- ë¬¸ì œ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ
- ë¬¸ì œ ê³µê°œ ê¸°ëŠ¥ (ì œì¶œìê°€ 2ê°œ ì´ìƒì˜ ì–¸ì–´ë¡œ í•´ê²°í•´ì•¼ ê°€ëŠ¥)
- ë¬¸ì œ ê²€ìƒ‰
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê´€ë¦¬
- ì´ë¯¸ì§€ ë° ëŒ€ìš©ëŸ‰ íŒŒì¼ ì§€ì› (S3 ì—°ë™)

### 2. íšŒì› ì‹œìŠ¤í…œ
- JWT ê¸°ë°˜ ì¸ì¦
- íšŒì›ê°€ì…/ë¡œê·¸ì¸

### 3. ì½”ë“œ ì œì¶œ ë° ì±„ì 
- ë‹¤ì¤‘ ì–¸ì–´ ì§€ì› (Java, Python ë“±)
- Dockerë¥¼ ì´ìš©í•œ ì•ˆì „í•œ ì½”ë“œ ì‹¤í–‰
- ì‹œê°„/ë©”ëª¨ë¦¬ ì œí•œ ì²´í¬
- ì‹¤ì‹œê°„ ì±„ì  ì§„í–‰ìƒí™© ì¡°íšŒ (SSE)

### 4. ì‹¤ì‹œê°„ ì±„ì  í˜„í™© 
- **Server-Sent Events (SSE)** ë¥¼ í†µí•œ ì‹¤ì‹œê°„ ì§„í–‰ìƒí™© ìŠ¤íŠ¸ë¦¬ë°
- ì±„ì  ë‹¨ê³„ë³„ ì§„í–‰ë¥  (ì»´íŒŒì¼, í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì‹¤í–‰, ì™„ë£Œ)
- í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë³„ ì‹¤í–‰ ì§„í–‰ë„ í‘œì‹œ
- ì±„ì  ì™„ë£Œì‹œ ìµœì¢… ê²°ê³¼ ìë™ ì „ì†¡

### 5. ë©”ì‹œì§• ì‹œìŠ¤í…œ
- **AWS SQS** - ë¹„ë™ê¸° ì±„ì  ìš”ì²­ ì²˜ë¦¬ 
- **Redis Pub/Sub** - ì‹¤ì‹œê°„ ì±„ì  ì§„í–‰ìƒí™© ì „ë‹¬
- ì±„ì  ìš”ì²­/ê²°ê³¼ í ë¶„ë¦¬

### 6. ë™ì‹œì„± ì œì–´
- **Redis ë¶„ì‚°ë½** - ë¬¸ì œ ìˆ˜ì •/ê³µê°œ ì‹œ ë™ì‹œì„± ì œì–´
- **AOP ê¸°ë°˜ ë½ ê´€ë¦¬** - ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê°„í¸í•œ ë½ ì ìš©

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Problem Service (Backend)
- **Java 21** + **Spring Boot 3.5.3**
- **Spring Data JPA** - ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
- **Spring Security** - ì¸ì¦/ì¸ê°€ (JWT)
- **Server-Sent Events** - ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°
- **Spring AOP** - ë¶„ì‚°ë½ êµ¬í˜„
- **Redisson** - Redis ë¶„ì‚°ë½ í´ë¼ì´ì–¸íŠ¸
- **AWS SDK** - S3, SQS ì—°ë™
- **MySQL** - ë°ì´í„°ë² ì´ìŠ¤

### Judge Server
- **Python 3.10+** + **FastAPI**
- **Docker** - ì½”ë“œ ì‹¤í–‰ ê²©ë¦¬
- **Redis** - ì‹¤ì‹œê°„ ì§„í–‰ìƒí™© ë°œí–‰
- **Boto3** - AWS SQS ì—°ë™

### ì¸í”„ë¼
- **AWS S3** - íŒŒì¼ ì €ì¥ì†Œ
- **AWS SQS** - ë©”ì‹œì§€ í
- **Redis** - ì‹¤ì‹œê°„ ë©”ì‹œì§•
- **Docker** - ì»¨í…Œì´ë„ˆí™”

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### ì‹¤ì‹œê°„ ì±„ì  í˜„í™© ì¡°íšŒ
```javascript
// SSE ì—°ê²°ì„ í†µí•œ ì‹¤ì‹œê°„ ì±„ì  í˜„í™© ìˆ˜ì‹ 
const eventSource = new EventSource('/submissions/{submissionId}/progress', {
  headers: {
    'Authorization': 'Bearer {token}'
  }
});

// ì—°ê²° í™•ë¦½
eventSource.addEventListener('connected', (event) => {
  console.log('ì±„ì  í˜„í™© ìŠ¤íŠ¸ë¦¬ë° ì—°ê²°ë¨:', event.data);
});

// ì§„í–‰ìƒí™© ì—…ë°ì´íŠ¸ ìˆ˜ì‹ 
eventSource.addEventListener('progress', (event) => {
  const progressData = JSON.parse(event.data);
  console.log(`ì§„í–‰ë¥ : ${progressData.progressPercent}%`);
  console.log(`í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤: ${progressData.currentTest}/${progressData.totalTests}`);
});

// ì±„ì  ì™„ë£Œ
eventSource.addEventListener('completed', (event) => {
  const finalResult = JSON.parse(event.data);
  console.log('ì±„ì  ì™„ë£Œ:', finalResult.finalStatus);
  eventSource.close();
});
```

### ì§„í–‰ìƒí™© ì´ë²¤íŠ¸ êµ¬ì¡°
```json
{
  "submissionId": 123,
  "username": "user123", 
  "submitStatus": "JUDGING",
  "progressPercent": 45,
  "currentTest": 3,
  "totalTests": 7,
  "timestamp": "2024-01-01T12:00:00"
}
```
